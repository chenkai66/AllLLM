# AI智能对话系统 - 增强版

## 新增功能

### 1. 上下文管理
- 系统会维护每个对话的上下文历史（最多30000字符）
- 智能提取与当前问题相关的上下文信息
- 结合上下文信息重写用户查询

### 2. 历史对话处理
- 新增"加载历史对话"复选框
- 勾选后系统会读取并处理历史对话
- 对历史对话进行分类和摘要：
  - 一级分类：技术科学类、生活百科类等
  - 二级分类：编程开发、人工智能等
  - 对话摘要：简洁的对话内容总结

### 3. 分层分类检索
- 智能选择相关的一级分类
- 进一步选择相关的二级分类
- 根据分类结果检索相关历史对话

### 4. 多源信息融合
- 综合历史对话、知识库召回结果生成回答
- 清晰标注各部分信息来源

## 使用方法

1. 在设置区域勾选"加载历史对话"复选框
2. 正常输入问题并发送
3. 系统会自动处理历史对话并生成更精准的回答

## 技术实现

- `context_manager.py`：上下文管理器
- `history_processor.py`：历史对话处理器
- `enhanced_query_processor.py`：增强查询处理器
- 前端界面已更新支持新功能
- 后端API已更新支持新功能